(this["webpackJsonplineage-fp"]=this["webpackJsonplineage-fp"]||[]).push([[0],{199:function(e,t,n){e.exports=n(358)},204:function(e,t,n){},226:function(e,t){},228:function(e,t){},239:function(e,t){},241:function(e,t){},268:function(e,t){},270:function(e,t){},271:function(e,t){},277:function(e,t){},279:function(e,t){},297:function(e,t){},300:function(e,t){},316:function(e,t){},319:function(e,t){},358:function(e,t,n){"use strict";n.r(t);var a=n(49),o=n(28),l=n(18),s=n(82),i=n(81),r=n(0),c=n.n(r),u=n(10),d=n.n(u),h=(n(204),n(103)),m=n.n(h);function p(e,t,n){return e=""+e,Array.from(Array(Math.max(0,t-e.length)).keys()).map((function(t){e=n+e})),e}function f(e){e=Math.min(20,Math.max(10,e||15));var t="0123456789";t+="abcdefghijklmnopqrstuvwxyz",t+="ABCDEFGHIJKLMNOPQRSTUVWXYZ";var n="";n+=Math.round(100*Math.random());var a=new Date;return n+=p(a.getSeconds(),2,0),n+=p(a.getMinutes(),2,0),n+=p(a.getHours(),2,0),n+=p(a.getDate(),2,0),n+=p(a.getMonth(),2,0),n=function e(t,n){return n||(n="0123456789",n+="abcdefghijklmnopqrstuvwxyz",n+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),t<n.length?n[t]:e(Math.floor(t/n.length))+n[t%n.length]}(n+=p(parseInt(a.getYear().toString().substring(1)),2,0),t),Array.from(Array(e-n.length).keys()).map((function(e){n=t[Math.round(Math.random()*(t.length-1))]+n})),n}var g=n(184),b=n(402),v=n(221);function y(e){return parseInt(e,36)}var E=["red","pink",,"purple","deep-purple","indigo","blue","light-blue","green","light-green","lime","yellow","amber","orange","deep-orange","brown","grey","blue-grey","black","white"],w=["none","start","end","both"],k=Object(g.a)({palette:{type:"dark"},typography:{useNextVariants:!0}}),S="IIA",x="IIB",B="IIC",C="IID";function L(e,t,n){var a="";return e.split(t).map((function(e){a+=e+n})),a.substring(0,a.length-n.length)}function A(e){var t={"\xa7":"%C2%A7",'"':"%22","#":"%23","%":"%25","&":"%26","=":"%3D","`":"%60","^":"%5E","+":"%2B","\xb4":"%C2%B4","\xa8":"%C2%A8"};if(e){var n={};return Object.keys(t).map((function(e){n[t[e]]=e})),n}return t}function O(e,t){var n=v.AES.encrypt(JSON.stringify(e),t).toString(),a=A();return Object.keys(a).map((function(e){n=L(n,e,a[e])})),n}function j(e,t){var n=e,a=A(!0);return Object.keys(a).map((function(e){n=L(n,e,a[e])})),JSON.parse(v.AES.decrypt(n,t).toString(v.enc.Utf8))}var I=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).state={pswd:""},o}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return c.a.createElement("form",{autoComplete:"off",onSubmit:function(t){t.preventDefault(),e.props.onSubmit&&e.props.onSubmit(e.state.pswd)}},c.a.createElement(b.a,{id:"pswdfield",label:"Password",value:this.state.pswd,onChange:function(t){e.setState({pswd:t.target.value})},type:"text",InputLabelProps:{shrink:!0},style:{width:"100%"},margin:"normal",inputRef:function(e){e&&e.focus()}}))}}]),n}(r.Component),P=n(176),M=n.n(P),F=n(404),R=n(400),T=n(403),D=n(392),U=n(396),H=n(393),N=n(394),W=n(397),z=n(395),J=n(405),Q=n(399),K=n(398),q=n(179),Y=n.n(q),G=n(180),X=n.n(G),Z=n(182),V=n.n(Z),_=n(183),$=n.n(_),ee=n(83),te=n.n(ee),ne=n(66),ae=n.n(ne),oe=n(177),le=n.n(oe),se=n(105),ie=n.n(se),re=n(181),ce=n.n(re),ue=n(178),de=n.n(ue),he=n(104),me=n(350),pe=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).state={showSettings:!0,showInfobox:!1,selected:null,selectedLine:null,connecting:null,inputColor:"#00fff2",outputColor:"#0c00ff",lineWidth:4,points:{},theme:"indigo",variant:"outlined",background:"white",arrow:"none",lastPos:{x:300,y:50},snackShow:!1,snackMsg:"",snackColor:le.a[500],doFocus:!1,testmsg:"thisisatesttoverifydecryption",showSaveBox:!1},o.diagramRef=null,o.baseUrl=window.location.href.split("/?p=")[0],"/"!==o.baseUrl[o.baseUrl.length-1]&&(o.baseUrl+="/"),o.count=Object.keys(o.state.points).length,o.currentQuery="",o.handleClick=o.handleClick.bind(Object(l.a)(o)),o.handleTouch=o.handleTouch.bind(Object(l.a)(o)),o.settingsBox=o.settingsBox.bind(Object(l.a)(o)),o.infoBox=o.infoBox.bind(Object(l.a)(o)),o.handleAddPoint=o.handleAddPoint.bind(Object(l.a)(o)),o.saveBox=o.saveBox.bind(Object(l.a)(o)),o.loadBox=o.loadBox.bind(Object(l.a)(o)),Object.keys(o.state.points).map((function(e){Object.keys(o.state.points[e].outputs).map((function(t){"dash"in o.state.points[e].outputs[t]||(o.state.points[e].outputs[t].dash=0)}))})),o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e,t=this,n=["red","pink",,"purple","deep-purple","indigo","blue","light-blue","green","light-green","lime","yellow","amber","orange","deep-orange"],a=window.location.href.split(this.baseUrl)[1].substring(3);if(a)try{a=a.slice(0,15),e=function(e){if(a in e)if("prsr02"===e[a].substring(0,6)){var o=j(e[a].substring(6),"Hello world!");t.count=Object.keys(o.points).length+1,t.setState(o),t.setState({snackShow:!0,snackMsg:"Loaded model from URL",snackcolor:te.a.A700})}else if("prsr03"===e[a].substring(0,6))t.setState({showLoadBox:!0,encryptedQuery:e[a].substring(6)});else{var l=function(e){var t={points:{}},n=e.split(S);return t.theme="R"===n[0]?null:E[y(n[0])],t.variant=n[1],t.lineWidth=y(n[2]),t.count=y(n[3]),n.slice(4).map((function(e){var n={},a=e.split(x);n.msg=a[1],n.pos={x:10*y(a[2]),y:10*y(a[3])},n.outputs={},a[4].split(B).map((function(e){var t=e.split(C);if(2===t.length){var a={a:"auto",t:"top",l:"left",c:"center",r:"right",b:"bottom"};n.outputs[t[0]]={output:a[t[1][0]],input:a[t[1][1]]}}})),t.points[""+a[0]]=n})),t}(e[a=L(a,"lll",".")]);t.count=l.count,Object.keys(l.points).map((function(e){Object.keys(l.points[e].outputs).map((function(t){"dash"in l.points[e].outputs[t]||(l.points[e].outputs[t].dash=0)}))})),t.setState({theme:null===l.theme?n[Math.round(Math.random()*n.length)]:l.theme,variant:l.variant,lineWidth:l.lineWidth,points:l.points,snackShow:!0,snackMsg:"Loaded model from URL",snackcolor:te.a.A700})}else t.setState({snackShow:!0,snackMsg:"Failed to load model from URL",snackcolor:ae.a.A400})},m.a.get("https://docs.google.com/spreadsheets/d/1qNBuXr5KIHPHqoNBgZEao2F3rAjBtMiQf6fsEDug0mk/export?format=csv&id=1qNBuXr5KIHPHqoNBgZEao2F3rAjBtMiQf6fsEDug0mk&gid=0").then((function(t){for(var n,a={},o=t.data.split("\r\n"),l=1;l<o.length;l++)a[(n=o[l].split(","))[0]]=n[1];e(a)}))}catch(o){console.log("Failed to rebuild from query",o),this.setState({snackShow:!0,snackMsg:"Failed to load model from URL",snackcolor:ae.a.A400})}}},{key:"handleAddPoint",value:function(){var e={msg:"",pos:{x:this.state.lastPos.x,y:this.state.lastPos.y+100},outputs:{}},t=this.state.points;t[""+this.count]=e,this.count+=1,this.setState({points:t,selected:""+(this.count-1),lastPos:{x:this.state.lastPos.x,y:this.state.lastPos.y+100}})}},{key:"handleClick",value:function(e,t){this.doFocus=!0;var n=this.state.selected,a=this.state.points;if(t.shiftKey){if(null===n)n=e;else if(n!==e){var o=a[n];e in o.outputs?delete o.outputs[e]:o.outputs[e]={output:"auto",input:"auto",dash:0}}}else n=null===n?e:n===e?null:e;this.setState({selected:n,points:a})}},{key:"handleTouch",value:function(e){this.doFocus=!1;var t=this.state.selected,n=this.state.points;if(null===t)t=e;else if(t!==e){var a=n[t];e in a.outputs?delete a.outputs[e]:a.outputs[e]={output:"auto",input:"auto",dash:0}}this.setState({selected:t,points:n})}},{key:"infoBox",value:function(){return c.a.createElement("div",{style:{position:"fixed",top:0,left:0,width:350,paddingLeft:10,opacity:.8}},c.a.createElement(H.a,{style:{marginTop:10,maxHeight:"70vh",overflow:"scroll"}},c.a.createElement(N.a,null,c.a.createElement(z.a,{gutterBottom:!0,variant:"h5",component:"h2",style:{opacity:1}},"Flowpoints!"),c.a.createElement(z.a,{component:"p"},"A developer-friendly library for creating flowcharts and diagrams.",c.a.createElement("br",null),c.a.createElement("br",null),"This is a demo for the React JS package found ",c.a.createElement("a",{style:{color:"#29F9FF"},href:"https://www.npmjs.com/package/flowpoints"},"here"),c.a.createElement("br",null),c.a.createElement("br",null),"Here's some hints to get you started!",c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"Creating new flowpoints:"),c.a.createElement("br",null),"You can create new nodes with the blue plus button in the lower right corner. New nodes will appear just beneath whichever node was created or moved last.",c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"Adding connections:"),c.a.createElement("br",null),"Start by selecting a node. It\xb4s color should change to indicate that it\xb4s been selected. Next hold shift while clicking another node to connect the two. Keep holding shift and clicking other nodes to connect to those as well.",c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"Removing connections:"),c.a.createElement("br",null),'Just repeat the steps from the "adding connections" section to delete that connection between two nodes.',c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"Changing styles:"),c.a.createElement("br",null),"Click the settings button in the lower right corner (this info box will disappear!). In the menu that shows up you'll be able to change the appearance of your flowchart. Everything in this menu should be fairly self-explanatory :)",c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"Sharing your work:"),c.a.createElement("br",null),"You can share your current diagrams by clicking the link-button in the lower right corner. When clicking this a link will be copied to your clipboard.",c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"!!!"),c.a.createElement("br",null),"Please note that when you create links like this a string representation of your diagram will be stored in a ",c.a.createElement("b",null,"publicly viewable")," Google Sheet. As this demo is hosted using GitHub pages I don\xb4t have an actual server to store user data on."))))}},{key:"settingsBox",value:function(){var e=this;return c.a.createElement("div",{style:{position:"fixed",top:0,left:0,width:250,paddingLeft:10,opacity:.8}},this.state.showSettings?c.a.createElement(H.a,{style:{marginTop:10}},c.a.createElement(N.a,null,c.a.createElement(z.a,{gutterBottom:!0,variant:"h5",component:"h2",style:{opacity:1}},"Settings"),c.a.createElement("div",{style:{paddingBottom:10}},c.a.createElement(D.a,{style:{width:"100%"}},c.a.createElement(T.a,{htmlFor:"backselect"},"Background"),c.a.createElement(R.a,{value:this.state.background,inputProps:{name:"back select",id:"backselect"},onChange:function(t){e.setState({background:t.target.value})}},E.map((function(e){return c.a.createElement(F.a,{value:e},e)}))))),c.a.createElement("div",{style:{paddingBottom:10}},c.a.createElement(D.a,{style:{width:"100%"}},c.a.createElement(T.a,{htmlFor:"themeselect"},"Theme"),c.a.createElement(R.a,{value:this.state.theme,inputProps:{name:"theme select",id:"themeselect"},onChange:function(t){e.setState({theme:t.target.value})}},E.map((function(e){return c.a.createElement(F.a,{value:e},e)}))))),c.a.createElement("div",{style:{paddingBottom:10}},c.a.createElement(D.a,{style:{width:"100%"}},c.a.createElement(T.a,{htmlFor:"arrowselect"},"Arrows"),c.a.createElement(R.a,{value:this.state.arrow,inputProps:{name:"arrow select",id:"arrowselect"},onChange:function(t){e.setState({arrow:t.target.value})}},w.map((function(e){return c.a.createElement(F.a,{value:e},e)}))))),c.a.createElement("div",null,c.a.createElement(D.a,{style:{width:"100%"}},c.a.createElement(T.a,{htmlFor:"variantselect"},"Variant"),c.a.createElement(R.a,{value:this.state.variant,inputProps:{name:"variant select",id:"variantselect"},onChange:function(t){e.setState({variant:t.target.value})}},["paper","outlined","filled"].map((function(e){return c.a.createElement(F.a,{value:e},e)}))))),c.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},c.a.createElement(b.a,{id:"linewidthfield",label:"Line width",value:this.state.lineWidth,onChange:function(t){e.setState({lineWidth:t.target.value})},type:"number",InputLabelProps:{shrink:!0},style:{width:"100%"},margin:"normal"})),c.a.createElement(U.a,{variant:"outlined",onClick:function(){me.toPng(e.diagramRef).then((function(e){(new Image).src=e;var t=document.createElement("a");t.download="diagram.png",t.href=e,t.click()}))}},"Export PNG"))):null,null!==this.state.selected&&this.state.selected in this.state.points?c.a.createElement(H.a,{style:{marginTop:10}},c.a.createElement(N.a,{style:{paddingTop:0,paddingBottom:15}},c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.handleAddPoint()}},c.a.createElement(b.a,{id:"msgfield",label:"Message",autoComplete:"off",inputRef:function(t){e.doFocus&&t&&t.focus()},value:this.state.points[this.state.selected].msg,onChange:function(t){var n=e.state.points;n[e.state.selected].msg=t.target.value,e.setState({points:n})},InputLabelProps:{shrink:!0},style:{width:"100%"},margin:"normal"})),c.a.createElement(U.a,{variant:"outlined",onClick:function(){var t=e.state.selected,n={};Object.keys(e.state.points).map((function(a){a!==t&&(n[a]=e.state.points[a])})),0===Object.keys(n).length&&(e.count=0),e.setState({selected:null,points:n})}},"Delete"))):null,this.state.selectedLine?c.a.createElement(H.a,{style:{marginTop:10}},c.a.createElement(N.a,{style:{paddingTop:0,paddingBottom:15}},c.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},c.a.createElement(b.a,{label:"Dash length",type:"number",autoComplete:"off",value:this.state.points[this.state.selectedLine.a].outputs[this.state.selectedLine.b].dash,onChange:function(t){var n=e.state.points,a=t.target.value;a=a>0?Math.round(a):null,n[e.state.selectedLine.a].outputs[e.state.selectedLine.b].dash=a,e.setState({points:n})},InputLabelProps:{shrink:!0},style:{width:"100%"},margin:"normal"})))):null)}},{key:"saveBox",value:function(){var e=this;return c.a.createElement("div",{style:{position:"fixed",top:0,left:260,width:250,paddingLeft:10,opacity:.9}},c.a.createElement(H.a,{style:{marginTop:10}},c.a.createElement(N.a,null,c.a.createElement(z.a,{gutterBottom:!0,variant:"h5",component:"h2",style:{opacity:1}},"Password (optional)"),c.a.createElement(z.a,{component:"p"},"Hit enter to skip.",c.a.createElement("br",null),c.a.createElement("br",null),"Create a password to encrypt your document, or leave this field blank to get a publicly available link.",c.a.createElement("br",null),c.a.createElement("br",null),"Note that if you forget this key the document cannot be recovered.",c.a.createElement("br",null)),c.a.createElement("div",{style:{paddingBottom:10}},c.a.createElement(I,{onSubmit:function(t){var n=e.state;n.showSaveBox=!1,n.showLoadBox=!1;var a="prsr";!function(e,t){var n=f(),a="https://docs.google.com/forms/d/e/1FAIpQLSengBsi9gQZ0Od0xvUK8hrUXtlzYxJMeTgeepRCK_OPpfaelw/formResponse?usp=pp_url";a+="&entry.32769032="+n,a+="&entry.1926665398="+function(e,t,n){var a="";return e.split(t).map((function(e){a+=e+n})),a.substring(0,a.length-n.length)}(e," ","+"),a+="&submit=Submit",console.log(a),m.a.get(a).then((function(e){})),t(n)}(a+=""===t?"02"+O(n,"Hello world!"):"03"+O(n,t),(function(t){var n=e.baseUrl+"?p="+t;M()(n),e.setState({snackShow:!0,snackMsg:"Copied link to clipboard",snackcolor:ie.a.A400}),window.history.pushState({},t,n)}))}})),c.a.createElement(U.a,{variant:"outlined",onClick:function(){e.setState({showSaveBox:!1})}},"Cancel"))))}},{key:"loadBox",value:function(){var e=this;return c.a.createElement("div",{style:{position:"fixed",top:0,left:260,width:250,paddingLeft:10,opacity:.9}},c.a.createElement(H.a,{style:{marginTop:10}},c.a.createElement(N.a,null,c.a.createElement(z.a,{gutterBottom:!0,variant:"h5",component:"h2",style:{opacity:1}},"Password"),c.a.createElement(z.a,{component:"p"},"The document is encrypted.",c.a.createElement("br",null),c.a.createElement("br",null),"Please type your key in order to decrypt it.",c.a.createElement("br",null)),c.a.createElement("div",{style:{paddingBottom:10}},c.a.createElement(I,{onSubmit:function(t){var n=j(e.state.encryptedQuery,t);if(n.testmsg&&"thisisatesttoverifydecryption"===n.testmsg)return e.count=Object.keys(n.points).length+1,e.setState(n),void e.setState({snackShow:!0,showLoadBox:!1,snackMsg:"Loaded model from URL",snackcolor:te.a.A700});e.setState({snackShow:!0,snackMsg:"Failed to decrypt data",snackcolor:ae.a.A400})}})),c.a.createElement(U.a,{variant:"outlined",onClick:function(){e.setState({showLoadBox:!1})}},"Cancel"))))}},{key:"render",value:function(){var e=this;return c.a.createElement(W.a,{theme:k},c.a.createElement("div",null,c.a.createElement(he.Flowspace,{theme:this.state.theme,variant:this.state.variant,background:this.state.background,arrowStart:"start"===this.state.arrow||"both"===this.state.arrow,arrowEnd:"end"===this.state.arrow||"both"===this.state.arrow,getDiagramRef:function(t){e.diagramRef=t},avoidCollisions:!0,style:{height:"100vh",width:"100vw"},connectionSize:this.state.lineWidth,selected:this.state.selected,selectedLine:this.state.selectedLine,onClick:function(){e.setState({selected:null,selectedLine:null})},onLineClick:function(t,n){e.setState({selectedLine:{a:t,b:n}})}},Object.keys(this.state.points).map((function(t){var n=e.state.points[t];return c.a.createElement(he.Flowpoint,{key:t,snap:{x:10,y:10},style:{height:Math.max(50,30*Math.ceil(n.msg.length/20))},startPosition:n.pos,outputs:n.outputs,onClick:function(n){e.handleClick(t,n)},onTouch:function(n){e.handleTouch(t)},onDrag:function(n){var a=e.state.points;a[t].pos=n,e.setState({points:a,lastPos:n})}},c.a.createElement("div",{style:{display:"table",width:"100%",height:"100%"}},c.a.createElement("div",{style:{display:"table-cell",verticalAlign:"middle",textAlign:"center",paddingLeft:2,paddingRight:2}},""!==n.msg?n.msg:"Empty")))})))),this.state.showInfobox?this.infoBox():this.settingsBox(),c.a.createElement("div",{style:{position:"fixed",bottom:0,right:0,padding:3}},c.a.createElement("div",{style:{paddingBottom:3}},c.a.createElement(K.a,{style:{background:de.a.A400,color:"#ffffff",zIndex:6,boxShadow:"none"},onClick:function(){e.handleAddPoint()}},c.a.createElement(Y.a,null))),c.a.createElement("div",{style:{paddingBottom:3}},c.a.createElement(K.a,{style:{background:ie.a.A400,color:"#ffffff",zIndex:6,boxShadow:"none"},onClick:function(){e.setState({showSaveBox:!0,password:""})}},c.a.createElement(X.a,null))),c.a.createElement("div",{style:{paddingBottom:3}},c.a.createElement(K.a,{style:{background:ce.a.A400,color:"#ffffff",zIndex:6,boxShadow:"none"},onClick:function(){e.setState({showSettings:!!e.state.showInfobox||!e.state.showSettings,showInfobox:!1})}},c.a.createElement(V.a,null))),c.a.createElement("div",null,c.a.createElement(K.a,{style:{background:ae.a.A700,color:"#ffffff",zIndex:6,boxShadow:"none"},onClick:function(){e.setState({showInfobox:!e.state.showInfobox})}},c.a.createElement($.a,null)))),c.a.createElement(J.a,{autoHideDuration:3e3,onClose:function(){e.setState({snackShow:!1})},anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.snackShow},c.a.createElement(Q.a,{message:this.state.snackMsg,style:{backgroundColor:this.state.snackcolor,color:"black"}})),this.state.showSaveBox?this.saveBox():null,this.state.showLoadBox?this.loadBox():null)}}]),n}(r.Component);d.a.render(c.a.createElement(pe,null),document.getElementById("root"))}},[[199,1,2]]]);
//# sourceMappingURL=main.4a3516eb.chunk.js.map